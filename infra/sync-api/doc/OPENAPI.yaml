openapi: 3.0.0
info:
  title: BreachLine Sync API
  description: >-
    The BreachLine Sync API enables real-time collaboration by synchronizing
    workspaces and annotations across team members and devices.


    ## Pricing


    ### Premium License


    Required to use the Sync API and BreachLine application:


    - **Monthly**: $10 USD per month
        
    - **Yearly**: $100 USD per year
        

    ### Workspace Sync Service


    **Base Plan**: $5 USD per month


    - Includes 5 online workspaces
        

    **Additional Workspaces**: $5 USD per month per pack (5 workspaces per pack)


    **Team Collaboration Seats**: $1 USD per seat per month


    - Each seat allows adding 1 team member to 1 workspace
        

    ## Authentication


    The API uses PIN-based authentication with JWT tokens. All endpoints (except
    PIN request and verification) require a valid Bearer token.


    Contact Support:  

    Name: BreachLine Support
  version: 1.0.0
servers:
  - url: http://{{baseurl}}
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
security:
  - bearerAuth: []
tags:
  - name: auth
  - name: auth > request-pin
  - name: auth > verify-pin
  - name: auth > refresh
  - name: workspaces
  - name: workspaces > {workspace_id}
  - name: workspaces > {workspace_id} > convert-to-shared
  - name: workspaces > {workspace_id} > annotations
  - name: workspaces > {workspace_id} > annotations > {annotation_id}
  - name: workspaces > {workspace_id} > members
  - name: workspaces > {workspace_id} > members > {user_id}
paths:
  /auth/request-pin:
    post:
      tags:
        - auth > request-pin
      summary: Request a PIN for authentication
      description: >-
        Request a 6-digit PIN to be sent via email. Email is extracted from the
        license file. PIN valid for 12 hours.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                license: '{{license}}'
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                message: PIN sent to user@example.com
                expires_at: '1993-01-09T17:10:51.317Z'
                pin_id: string
        '400':
          description: Bad Request
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: bad_request
                  message: Invalid request parameters
        '429':
          description: Too Many Requests
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: rate_limit_exceeded
                  message: Too many requests
  /auth/verify-pin:
    post:
      tags:
        - auth > verify-pin
      summary: Verify PIN and receive access tokens
      description: >-
        Verify PIN and receive JWT tokens. User info is derived from license and
        embedded in tokens.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                license: '{{license}}'
                pin: '980759'
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                access_token: string
                refresh_token: string
                token_type: Bearer
                expires_in: 86400
                user:
                  email: PWi@WTHkCuAVOqmsExsum.vm
                  workspace_limit: 8881
                  workspace_count: 3126
                  seat_count: 8023
                  seats_used: 8909
        '400':
          description: Bad Request
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: bad_request
                  message: Invalid request parameters
        '401':
          description: Unauthorized
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: unauthorized
                  message: Missing or invalid authentication token
  /auth/refresh:
    post:
      tags:
        - auth > refresh
      summary: Refresh an expired access token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                license: '{{license}}'
                refresh_token: '{{refreshToken}}'
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                access_token: string
                token_type: Bearer
                expires_in: 86400
        '401':
          description: Unauthorized
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: unauthorized
                  message: Missing or invalid authentication token
  /workspaces/{workspace_id}/convert-to-shared:
    post:
      tags:
        - workspaces > {workspace_id} > convert-to-shared
      summary: Convert workspace to shared
      requestBody:
        content: {}
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                workspace_id: string
                name: string
                owner_id: string
                is_shared: false
                member_count: 162
                created_at: '2003-03-16T13:16:20.271Z'
                updated_at: '1991-12-09T08:29:11.535Z'
                version: 2747
        '409':
          description: Conflict
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: already_shared
                  message: Workspace is already shared
  /workspaces/{workspace_id}/annotations/{annotation_id}:
    get:
      tags:
        - workspaces > {workspace_id} > annotations > {annotation_id}
      summary: Get annotation details
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
        - name: annotation_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{annotation_id}}'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                annotation_id: string
                workspace_id: string
                file_path: string
                content: string
                annotation_type: bookmark
                position:
                  line: 4635
                  offset: 1295
                  start: 3352
                  end: 3626
                tags:
                  - string
                  - string
                created_by: string
                created_by_name: string
                created_at: '1976-07-31T01:30:52.184Z'
                updated_at: '2009-12-31T08:34:53.155Z'
                version: 8429
                edit_history:
                  - edited_by: string
                    edited_at: '1955-01-23T12:39:35.508Z'
                    changes:
                      - string
                      - string
                  - edited_by: string
                    edited_at: '2007-03-05T09:05:37.141Z'
                    changes:
                      - string
                      - string
    put:
      tags:
        - workspaces > {workspace_id} > annotations > {annotation_id}
      summary: Update annotation
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                note: testing an update
                color: blue
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
        - name: annotation_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{annotation_id}}'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                annotation_id: string
                workspace_id: string
                file_path: string
                content: string
                annotation_type: note
                position:
                  line: 947
                  offset: 5219
                  start: 5989
                  end: 2929
                tags:
                  - string
                  - string
                created_by: string
                created_by_name: string
                created_at: '2007-06-21T07:56:34.653Z'
                updated_at: '2002-09-27T13:49:38.516Z'
                version: 2919
    delete:
      tags:
        - workspaces > {workspace_id} > annotations > {annotation_id}
      summary: Delete annotation
      parameters:
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
        - name: annotation_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{annotation_id}}'
      responses:
        '204':
          description: No Content
          content:
            text/plain:
              schema:
                type: string
              example: ''
  /workspaces/{workspace_id}/annotations:
    get:
      tags:
        - workspaces > {workspace_id} > annotations
      summary: List annotations
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: ws_7927e2d4-e199-4ea3-a402-c9005579cd48
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                annotations:
                  - annotation_id: string
                    workspace_id: string
                    file_path: string
                    content: string
                    annotation_type: bookmark
                    position:
                      line: 1660
                      offset: 2644
                      start: 4805
                      end: 6431
                    tags:
                      - string
                      - string
                    created_by: string
                    created_by_name: string
                    created_at: '2019-10-23T03:33:05.608Z'
                    updated_at: '1959-05-22T09:35:12.331Z'
                    version: 6169
                  - annotation_id: string
                    workspace_id: string
                    file_path: string
                    content: string
                    annotation_type: bookmark
                    position:
                      line: 8802
                      offset: 8402
                      start: 1527
                      end: 7013
                    tags:
                      - string
                      - string
                    created_by: string
                    created_by_name: string
                    created_at: '1983-07-20T04:07:37.373Z'
                    updated_at: '1955-01-30T06:02:45.798Z'
                    version: 3046
                total: 7456
                limit: 8976
                offset: 2945
    post:
      tags:
        - workspaces > {workspace_id} > annotations
      summary: Create annotation
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                file_path: string
                file_hash: string
                column_hashes:
                  - test: test
                  - test: test2
                note: test note
                color: red
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
      responses:
        '201':
          description: Created
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                annotation_id: string
                workspace_id: string
                file_path: string
                content: string
                annotation_type: note
                position:
                  line: 947
                  offset: 5219
                  start: 5989
                  end: 2929
                tags:
                  - string
                  - string
                created_by: string
                created_by_name: string
                created_at: '2007-06-21T07:56:34.653Z'
                updated_at: '2002-09-27T13:49:38.516Z'
                version: 2919
  /workspaces/{workspace_id}/members/{user_id}:
    put:
      tags:
        - workspaces > {workspace_id} > members > {user_id}
      summary: Update member role
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                role: editor
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
        - name: user_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: brenton.smorris+workspacemember@gmail.com
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                user_id: string
                role: string
                updated_at: '2018-10-19T05:35:22.897Z'
    delete:
      tags:
        - workspaces > {workspace_id} > members > {user_id}
      summary: Remove team member
      parameters:
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
        - name: user_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: brenton.smorris+workspacemember@gmail.com
      responses:
        '204':
          description: No Content
          content:
            text/plain:
              schema:
                type: string
              example: ''
  /workspaces/{workspace_id}/members:
    get:
      tags:
        - workspaces > {workspace_id} > members
      summary: List workspace members
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                members:
                  - user_id: string
                    email: bfDO5gsUqi4yN@pSidOIFRRr.vb
                    role: viewer
                    added_at: '2002-04-23T10:35:25.408Z'
                    last_active: '1975-10-12T15:33:34.314Z'
                  - user_id: string
                    email: eDjZf@GfQbsgbAXtuccYFujukevADpYG.bxh
                    role: owner
                    added_at: '1947-01-08T11:50:28.110Z'
                    last_active: '2021-06-23T15:42:39.469Z'
                total: 3071
    post:
      tags:
        - workspaces > {workspace_id} > members
      summary: Add team member
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                email: brenton.smorris+workspaceeditor@gmail.com
                role: editor
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
      responses:
        '201':
          description: Created
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                user_id: string
                email: string
                role: string
                added_at: '1959-05-22T08:35:04.170Z'
                invitation_sent: false
        '403':
          description: Forbidden
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: insufficient_seats
                  message: Not enough available seats to add this member
                  details:
                    seats_used: 5
                    seat_count: 5
                    seats_required: 1
                    purchase_url: https://breachline.com/purchase-seats
  /workspaces/{workspace_id}:
    get:
      tags:
        - workspaces > {workspace_id}
      summary: Get workspace details
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                workspace_id: string
                name: string
                owner_id: string
                is_shared: false
                member_count: 9403
                created_at: '1984-10-03T14:26:53.375Z'
                updated_at: '2013-12-12T17:20:04.365Z'
                version: 8246
                statistics:
                  total_files: 9539
                  total_annotations: 5760
        '401':
          description: Unauthorized
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: unauthorized
                  message: Missing or invalid authentication token
        '404':
          description: Not Found
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: not_found
                  message: Resource not found
    put:
      tags:
        - workspaces > {workspace_id}
      summary: Update workspace name
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                name: THIS IS A NEW WORKSPACE
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: '{{workspace_id}}'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                workspace_id: string
                name: string
                owner_id: string
                is_shared: false
                member_count: 162
                created_at: '2003-03-16T13:16:20.271Z'
                updated_at: '1991-12-09T08:29:11.535Z'
                version: 2747
        '401':
          description: Unauthorized
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: unauthorized
                  message: Missing or invalid authentication token
        '404':
          description: Not Found
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: not_found
                  message: Resource not found
    delete:
      tags:
        - workspaces > {workspace_id}
      summary: Delete workspace
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
        - name: workspace_id
          in: path
          schema:
            type: string
          required: true
          description: '(Required) '
          example: ws_xyz789
      responses:
        '204':
          description: No Content
          content:
            text/plain:
              schema:
                type: string
              example: ''
        '401':
          description: Unauthorized
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: unauthorized
                  message: Missing or invalid authentication token
        '404':
          description: Not Found
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: not_found
                  message: Resource not found
  /workspaces:
    get:
      tags:
        - workspaces
      summary: List all accessible workspaces
      parameters:
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                workspaces:
                  - workspace_id: string
                    name: string
                    owner_id: string
                    is_shared: true
                    member_count: 4302
                    created_at: '1975-12-04T16:57:27.592Z'
                    updated_at: '1967-03-01T01:06:55.645Z'
                    version: 1822
                    role: viewer
                    last_synced_at: '1994-11-09T23:01:21.037Z'
                  - workspace_id: string
                    name: string
                    owner_id: string
                    is_shared: false
                    member_count: 4352
                    created_at: '1987-04-26T23:17:57.214Z'
                    updated_at: '1988-05-22T08:56:35.939Z'
                    version: 9201
                    role: owner
                    last_synced_at: '1999-01-22T08:32:43.983Z'
                total: 1858
                limit: 5955
                offset: 1129
        '401':
          description: Unauthorized
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: unauthorized
                  message: Missing or invalid authentication token
    post:
      tags:
        - workspaces
      summary: Create a new workspace
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                name: test2
                is_shared: true
      parameters:
        - name: Content-Type
          in: header
          schema:
            type: string
          example: application/json
        - name: Accept
          in: header
          schema:
            type: string
          example: application/json
      responses:
        '201':
          description: Created
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                workspace_id: string
                name: string
                owner_id: string
                is_shared: false
                member_count: 162
                created_at: '2003-03-16T13:16:20.271Z'
                updated_at: '1991-12-09T08:29:11.535Z'
                version: 2747
        '400':
          description: Bad Request
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: bad_request
                  message: Invalid request parameters
        '403':
          description: Forbidden
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                error:
                  code: workspace_limit_reached
                  message: You have reached your workspace limit
                  details:
                    current_count: 5
                    limit: 5
                    purchase_url: https://breachline.com/purchase-workspaces
